<!DOCTYPE html>

<html lang="ms">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Fail Digital Penyelaras Modul TMK - SK Siburan Batu</title>
<link href="style.css" rel="stylesheet"/><style>

</style><script src="https://cdn.tailwindcss.com"></script>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { 
            background: linear-gradient(135deg, #1e3a8a 0%, #059669 100%) !important;
            background-color: #1e3a8a !important;
            position: relative;
            overflow: hidden;
        }
        .gradient-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            animation: float 20s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        .card-hover { 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fadeInUp 0.6s ease-out;
        }
        .card-hover:hover { 
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .animate-fade-in { animation: fadeInUp 0.8s ease-out; }
        .animate-slide-left { animation: slideInLeft 0.8s ease-out; }
        .animate-slide-right { animation: slideInRight 0.8s ease-out; }
        .animate-pulse-slow { animation: pulse 3s ease-in-out infinite; }
        .icon-bounce {
            transition: transform 0.3s ease;
        }
        .icon-bounce:hover {
            transform: scale(1.2) rotate(5deg);
        }
        .bg-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .category-icon {
            background: linear-gradient(135deg, var(--icon-color-1), var(--icon-color-2));
            transition: all 0.3s ease;
        }
        .category-icon:hover {
            transform: rotate(10deg) scale(1.1);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        .floating-shapes::before,
        .floating-shapes::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            animation: float 15s ease-in-out infinite;
        }
        .floating-shapes::before {
            width: 100px;
            height: 100px;
            top: 20%;
            left: 10%;
            animation-delay: -5s;
        }
        .floating-shapes::after {
            width: 150px;
            height: 150px;
            top: 60%;
            right: 10%;
            animation-delay: -10s;
        }
    
button[onclick='toggleRole()'] { display: none !important; }


</style>
</head>
<body class="bg-gray-50 min-h-screen">
<!-- Header -->
<header class="gradient-bg text-white shadow-lg bg-pattern">
<div class="floating-shapes"></div>
<div class="container mx-auto px-6 py-4 relative z-10">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-4">
<!-- School Logo -->
<div class="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg p-1 relative group cursor-pointer animate-pulse-slow">
<img alt="LOGO SEKOLAH" src="https://sksiburanbatu.github.io/sksb-tmk-digital-file-/logo.png" style="height:60px;"/>
<div class="editor-only absolute -bottom-1 -right-1 bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity">
                            ‚úèÔ∏è
                        </div>
</div>
<div class="animate-slide-left">
<h1 class="text-3xl font-bold text-white drop-shadow-lg mb-1">SK SIBURAN BATU</h1>
<p class="text-lg font-semibold text-yellow-200 animate-fade-in drop-shadow-md">Fail Digital Penyelaras Modul TMK</p>
</div>
</div>
<div class="flex items-center space-x-4 animate-slide-right">
<div class="glass-effect px-4 py-2 rounded-lg">
<span class="text-sm font-medium" id="userRole">Editor</span>
</div>
<button class="editor-only bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-lg font-medium hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105 shadow-lg" onclick="shareViewerLink()">
                        üì§ Kongsi Link
                    </button>
<button class="bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-50 transition-all duration-300 transform hover:scale-105 shadow-lg" onclick="toggleRole()">
                        Tukar Mod
                    </button>
</div>
</div>
</div>
</header>
<!-- Main Content -->
<main class="container mx-auto px-6 py-8">
<!-- Welcome Section -->
<div class="bg-gradient-to-r from-white to-blue-50 rounded-xl shadow-lg p-6 mb-8 animate-fade-in border border-blue-100">
<div class="flex items-center space-x-4">
<div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center animate-pulse-slow">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<div>
<h2 class="text-3xl font-bold text-gray-800 mb-2">Selamat Datang ke Sistem Pengurusan Fail Digital</h2>
<p class="text-gray-600">Platform pengurusan bahan dan dokumen untuk Modul Teknologi Maklumat dan Komunikasi (TMK)</p>
</div>
</div>
</div>
<!-- Categories Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
<!-- Surat-Menyurat -->
<div class="bg-gradient-to-br from-white to-blue-50 rounded-xl shadow-lg card-hover border border-blue-100">
<div class="p-6">
<div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mb-4 icon-bounce shadow-lg">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<h3 class="text-2xl font-bold text-gray-900 mb-2">Surat-Menyurat</h3>
<p class="text-gray-600 mb-4">Koleksi surat rasmi dan komunikasi berkaitan TMK</p>
<div class="space-y-2" id="surat-links">
<p class="text-sm text-gray-500">Tiada bahan dimuatnaik</p>
</div>
<button class="editor-only mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors w-full" onclick="openAddModal('surat')">
                        + Tambah Bahan
                    </button>
</div>
</div>
<!-- Dasar Pendidikan Digital -->
<div class="bg-gradient-to-br from-white to-green-50 rounded-xl shadow-lg card-hover border border-green-100">
<div class="p-6">
<div class="w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center mb-4 icon-bounce shadow-lg">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<h3 class="text-2xl font-bold text-gray-900 mb-2">Dasar Pendidikan Digital</h3>
<p class="text-gray-600 mb-4">Dokumen dasar dan garis panduan pendidikan digital</p>
<div class="space-y-2" id="dasar-links">
<p class="text-sm text-gray-500">Tiada bahan dimuatnaik</p>
</div>
<button class="editor-only mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors w-full" onclick="openAddModal('dasar')">
                        + Tambah Bahan
                    </button>
</div>
</div>
<!-- Buku Panduan Pelaksanaan -->
<div class="bg-gradient-to-br from-white to-purple-50 rounded-xl shadow-lg card-hover border border-purple-100">
<div class="p-6">
<div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mb-4 icon-bounce shadow-lg">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<h3 class="text-2xl font-bold text-gray-900 mb-2">Buku Panduan Pelaksanaan</h3>
<p class="text-gray-600 mb-4">Panduan lengkap pelaksanaan Modul TMK</p>
<div class="space-y-2" id="panduan-links">
<p class="text-sm text-gray-500">Tiada bahan dimuatnaik</p>
</div>
<button class="editor-only mt-4 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors w-full" onclick="openAddModal('panduan')">
                        + Tambah Bahan
                    </button>
</div>
</div>
<!-- Modul TMK Tahap 1 -->
<div class="bg-gradient-to-br from-white to-orange-50 rounded-xl shadow-lg card-hover border border-orange-100">
<div class="p-6">
<div class="w-12 h-12 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg flex items-center justify-center mb-4 icon-bounce shadow-lg">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<h3 class="text-2xl font-bold text-gray-900 mb-2">Modul TMK Tahap 1</h3>
<p class="text-gray-600 mb-4">Bahan pembelajaran TMK untuk tahap permulaan</p>
<div class="space-y-2" id="tahap1-links">
<p class="text-sm text-gray-500">Tiada bahan dimuatnaik</p>
</div>
<button class="editor-only mt-4 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors w-full" onclick="openAddModal('tahap1')">
                        + Tambah Bahan
                    </button>
</div>
</div>
<!-- Modul TMK Tahap 2 -->
<div class="bg-gradient-to-br from-white to-red-50 rounded-xl shadow-lg card-hover border border-red-100">
<div class="p-6">
<div class="w-12 h-12 bg-gradient-to-r from-red-500 to-red-600 rounded-lg flex items-center justify-center mb-4 icon-bounce shadow-lg">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<h3 class="text-2xl font-bold text-gray-900 mb-2">Modul TMK Tahap 2</h3>
<p class="text-gray-600 mb-4">Bahan pembelajaran TMK untuk tahap lanjutan</p>
<div class="space-y-2" id="tahap2-links">
<p class="text-sm text-gray-500">Tiada bahan dimuatnaik</p>
</div>
<button class="editor-only mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors w-full" onclick="openAddModal('tahap2')">
                        + Tambah Bahan
                    </button>
</div>
</div>
<!-- Aktiviti Pelaksanaan -->
<div class="bg-gradient-to-br from-white to-indigo-50 rounded-xl shadow-lg card-hover border border-indigo-100">
<div class="p-6">
<div class="w-12 h-12 bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center mb-4 icon-bounce shadow-lg">
<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
<path d="M13 10V3L4 14h7v7l9-11h-7z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<h3 class="text-2xl font-bold text-gray-900 mb-2">Aktiviti Pelaksanaan</h3>
<p class="text-gray-600 mb-4">Aktiviti dan projek pelaksanaan Modul TMK</p>
<div class="space-y-2" id="aktiviti-links">
<p class="text-sm text-gray-500">Tiada bahan dimuatnaik</p>
</div>
<button class="editor-only mt-4 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors w-full" onclick="openAddModal('aktiviti')">
                        + Tambah Bahan
                    </button>
</div>
</div>
</div>
</main>
<!-- Logo Upload Modal -->
<!-- Share Link Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="shareModal">
<div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
<h3 class="text-xl font-semibold mb-4">üì§ Kongsi Link Viewer</h3>
<p class="text-gray-600 mb-4">Salin link di bawah untuk dikongsi kepada viewer. Mereka hanya boleh melihat bahan tanpa boleh mengedit.</p>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-2">Link Viewer</label>
<div class="flex">
<input class="flex-1 px-3 py-2 border border-gray-300 rounded-l-lg bg-gray-50" id="viewerLink" readonly="" type="text"/>
<button class="px-4 py-2 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 transition-colors" onclick="copyViewerLink()">
                        üìã Salin
                    </button>
</div>
</div>
<div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
<p class="text-sm text-blue-800">
<strong>üí° Petua:</strong> Link ini akan membuka laman dalam mod viewer secara automatik. Viewer tidak boleh menambah atau membuang bahan.
                </p>
</div>
<button class="w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors" onclick="closeShareModal()">
                Tutup
            </button>
</div>
</div>
<!-- Add Material Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="addModal">
<div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
<h3 class="text-xl font-semibold mb-4" id="modalTitle">Tambah Bahan</h3>
<form id="addForm" onsubmit="addMaterial(event)">
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-2">Nama Bahan</label>
<input class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="materialName" required="" type="text"/>
</div>
<div class="mb-6">
<label class="block text-sm font-medium text-gray-700 mb-2">Pautan (URL)</label>
<input class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="materialLink" placeholder="https://" required="" type="url"/>
</div>
<div class="flex space-x-3">
<button class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors" onclick="closeModal()" type="button">
                        Batal
                    </button>
<button class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" type="submit">
                        Tambah
                    </button>
</div>
</form>
</div>
</div>
<script>
        let currentRole = 'editor';
        let currentCategory = '';
        let materials = {
            surat: [],
            dasar: [],
            panduan: [],
            tahap1: [],
            tahap2: [],
            aktiviti: []
        };

        function toggleRole() {
            currentRole = currentRole === 'editor' ? 'viewer' : 'editor';
            document.getElementById('userRole').textContent = currentRole === 'editor' ? 'Editor' : 'Viewer';
            
            const editorElements = document.querySelectorAll('.editor-only');
            editorElements.forEach(el => {
                el.style.display = currentRole === 'editor' ? 'block' : 'none';
            });
        }

        function openAddModal(category) {
            if (currentRole !== 'editor') return;
            
            currentCategory = category;
            const categoryNames = {
                surat: 'Surat-Menyurat',
                dasar: 'Dasar Pendidikan Digital',
                panduan: 'Buku Panduan Pelaksanaan',
                tahap1: 'Modul TMK Tahap 1',
                tahap2: 'Modul TMK Tahap 2',
                aktiviti: 'Aktiviti Pelaksanaan'
            };
            
            document.getElementById('modalTitle').textContent = `Tambah Bahan - ${categoryNames[category]}`;
            document.getElementById('addModal').classList.remove('hidden');
            document.getElementById('addModal').classList.add('flex');
            document.getElementById('materialName').focus();
        }

        function closeModal() {
            document.getElementById('addModal').classList.add('hidden');
            document.getElementById('addModal').classList.remove('flex');
            document.getElementById('addForm').reset();
        }

        function addMaterial(event) {
            event.preventDefault();
            
            const name = document.getElementById('materialName').value;
            const link = document.getElementById('materialLink').value;
            
            materials[currentCategory].push({ name, link });
            updateMaterialsList(currentCategory);
            closeModal();
        }

        function updateMaterialsList(category) {
            const container = document.getElementById(`${category}-links`);
            
            if (materials[category].length === 0) {
                container.innerHTML = '<p class="text-sm text-gray-500">Tiada bahan dimuatnaik</p>';
                return;
            }
            
            container.innerHTML = materials[category].map((material, index) => `
                <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                    <a href="${material.link}" target="_blank" class="text-blue-600 hover:text-blue-800 text-sm font-medium flex-1 truncate">
                        ${material.name}
                    </a>
                    ${currentRole === 'editor' ? `
                        <button onclick="removeMaterial('${category}', ${index})" class="ml-2 text-red-500 hover:text-red-700">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    ` : ''}
                </div>
            `).join('');
        }

        function removeMaterial(category, index) {
            if (currentRole !== 'editor') return;
            
            materials[category].splice(index, 1);
            updateMaterialsList(category);
        }

        function shareViewerLink() {
            if (currentRole !== 'editor') return;
            
            // Generate viewer link with current URL + viewer parameter
            const currentUrl = window.location.href.split('?')[0];
            const viewerUrl = `${currentUrl}?mode=viewer`;
            
            document.getElementById('viewerLink').value = viewerUrl;
            document.getElementById('shareModal').classList.remove('hidden');
            document.getElementById('shareModal').classList.add('flex');
        }

        function copyViewerLink() {
            const linkInput = document.getElementById('viewerLink');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999); // For mobile devices
            
            try {
                document.execCommand('copy');
                // Show success feedback
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Disalin!';
                button.classList.add('bg-green-600');
                button.classList.remove('bg-blue-600');
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.classList.remove('bg-green-600');
                    button.classList.add('bg-blue-600');
                }, 2000);
            } catch (err) {
                alert('Sila salin link secara manual');
            }
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.add('hidden');
            document.getElementById('shareModal').classList.remove('flex');
        }

        // Check URL parameters on page load
        function checkUrlParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const mode = urlParams.get('mode');
            
            if (mode === 'viewer') {
                currentRole = 'editor'; // Set to editor first
                toggleRole(); // Then toggle to viewer
                
                // Show notification that they're in viewer mode
                setTimeout(() => {
                    const notification = document.createElement('div');
                    notification.className = 'fixed top-4 right-4 bg-blue-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                    notification.innerHTML = 'üëÅÔ∏è Anda dalam mod viewer - hanya boleh melihat bahan';
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        notification.remove();
                    }, 4000);
                }, 500);
            }
        }

        function openLogoModal() {
            if (currentRole !== 'editor') return;
            
            document.getElementById('logoModal').classList.remove('hidden');
            document.getElementById('logoModal').classList.add('flex');
        }

        function closeLogoModal() {
            document.getElementById('logoModal').classList.add('hidden');
            document.getElementById('logoModal').classList.remove('flex');
            
            // Reset form
            document.getElementById('logoFile').value = '';
            document.getElementById('logoPreview').classList.add('hidden');
            document.getElementById('previewText').classList.remove('hidden');
        }

        function saveLogo() {
            const fileInput = document.getElementById('logoFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Sila pilih fail imej terlebih dahulu');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const logoData = e.target.result;
                
                // Save to localStorage
                localStorage.setItem('schoolLogo', logoData);
                
                // Update logo display
                updateLogoDisplay(logoData);
                
                closeLogoModal();
            };
            
            reader.readAsDataURL(file);
        }

        function updateLogoDisplay(logoData) {
            const logoImg = document.getElementById('schoolLogo');
            const defaultLogo = document.getElementById('defaultLogo');
            
            if (logoData) {
                logoImg.src = logoData;
                logoImg.classList.remove('hidden');
                defaultLogo.classList.add('hidden');
            } else {
                logoImg.classList.add('hidden');
                defaultLogo.classList.remove('hidden');
            }
        }

        function loadSavedLogo() {
            const savedLogo = localStorage.getItem('schoolLogo');
            if (savedLogo) {
                updateLogoDisplay(savedLogo);
            }
        }

        // File input change handler
        document.getElementById('logoFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('logoPreview');
                    const previewText = document.getElementById('previewText');
                    
                    preview.src = e.target.result;
                    preview.classList.remove('hidden');
                    previewText.classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        // Close modal when clicking outside
        document.getElementById('addModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        document.getElementById('shareModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeShareModal();
            }
        });

        document.getElementById('logoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLogoModal();
            }
        });

        // Initialize
        checkUrlParameters();
        if (currentRole === 'viewer') {
            // Already set by checkUrlParameters
        } else {
            toggleRole();
            toggleRole();
        }
        
        // Load saved logo on page load
        loadSavedLogo();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96f07fd213ba46a3',t:'MTc1NTE3NTAwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
